
spec-mem.c,911
static struct spec_mem_page_t *spec_mem_page_get(struct spec_mem_t *spec_mem, uint32_t addr)spec_mem_page_get27,859
static struct spec_mem_page_t *spec_mem_page_create(struct spec_mem_t *spec_mem, uint32_t addr)spec_mem_page_create46,1285
static void spec_mem_access_aligned(struct spec_mem_t *spec_mem, uint32_t addr, int size,spec_mem_access_aligned76,2083
static void spec_mem_access(struct spec_mem_t *spec_mem, uint32_t addr, int size,spec_mem_access119,3286
struct spec_mem_t *spec_mem_create(struct mem_t *mem)spec_mem_create144,3725
void spec_mem_free(struct spec_mem_t *spec_mem)spec_mem_free159,4086
void spec_mem_read(struct spec_mem_t *spec_mem, uint32_t addr, int size, void *buf)spec_mem_read166,4184
void spec_mem_write(struct spec_mem_t *spec_mem, uint32_t addr, int size, void *buf)spec_mem_write172,4336
void spec_mem_clear(struct spec_mem_t *spec_mem)spec_mem_clear178,4490

nmoesi-protocol.c,6668
int EV_MOD_NMOESI_LOAD;EV_MOD_NMOESI_LOAD24,857
int EV_MOD_NMOESI_LOAD_LOCK;EV_MOD_NMOESI_LOAD_LOCK25,881
int EV_MOD_NMOESI_LOAD_ACTION;EV_MOD_NMOESI_LOAD_ACTION26,910
int EV_MOD_NMOESI_LOAD_MISS;EV_MOD_NMOESI_LOAD_MISS27,941
int EV_MOD_NMOESI_LOAD_UNLOCK;EV_MOD_NMOESI_LOAD_UNLOCK28,970
int EV_MOD_NMOESI_LOAD_FINISH;EV_MOD_NMOESI_LOAD_FINISH29,1001
int EV_MOD_NMOESI_STORE;EV_MOD_NMOESI_STORE31,1033
int EV_MOD_NMOESI_STORE_LOCK;EV_MOD_NMOESI_STORE_LOCK32,1058
int EV_MOD_NMOESI_STORE_ACTION;EV_MOD_NMOESI_STORE_ACTION33,1088
int EV_MOD_NMOESI_STORE_UNLOCK;EV_MOD_NMOESI_STORE_UNLOCK34,1120
int EV_MOD_NMOESI_STORE_FINISH;EV_MOD_NMOESI_STORE_FINISH35,1152
int EV_MOD_NMOESI_NC_STORE;EV_MOD_NMOESI_NC_STORE37,1185
int EV_MOD_NMOESI_NC_STORE_LOCK;EV_MOD_NMOESI_NC_STORE_LOCK38,1213
int EV_MOD_NMOESI_NC_STORE_WRITEBACK;EV_MOD_NMOESI_NC_STORE_WRITEBACK39,1246
int EV_MOD_NMOESI_NC_STORE_ACTION;EV_MOD_NMOESI_NC_STORE_ACTION40,1284
int EV_MOD_NMOESI_NC_STORE_MISS;EV_MOD_NMOESI_NC_STORE_MISS41,1319
int EV_MOD_NMOESI_NC_STORE_UNLOCK;EV_MOD_NMOESI_NC_STORE_UNLOCK42,1352
int EV_MOD_NMOESI_NC_STORE_FINISH;EV_MOD_NMOESI_NC_STORE_FINISH43,1387
int EV_MOD_NMOESI_FIND_AND_LOCK;EV_MOD_NMOESI_FIND_AND_LOCK45,1423
int EV_MOD_NMOESI_FIND_AND_LOCK_PORT;EV_MOD_NMOESI_FIND_AND_LOCK_PORT46,1456
int EV_MOD_NMOESI_FIND_AND_LOCK_ACTION;EV_MOD_NMOESI_FIND_AND_LOCK_ACTION47,1494
int EV_MOD_NMOESI_FIND_AND_LOCK_FINISH;EV_MOD_NMOESI_FIND_AND_LOCK_FINISH48,1534
int EV_MOD_NMOESI_EVICT;EV_MOD_NMOESI_EVICT50,1575
int EV_MOD_NMOESI_EVICT_INVALID;EV_MOD_NMOESI_EVICT_INVALID51,1600
int EV_MOD_NMOESI_EVICT_ACTION;EV_MOD_NMOESI_EVICT_ACTION52,1633
int EV_MOD_NMOESI_EVICT_RECEIVE;EV_MOD_NMOESI_EVICT_RECEIVE53,1665
int EV_MOD_NMOESI_EVICT_WRITEBACK;EV_MOD_NMOESI_EVICT_WRITEBACK54,1698
int EV_MOD_NMOESI_EVICT_WRITEBACK_EXCLUSIVE;EV_MOD_NMOESI_EVICT_WRITEBACK_EXCLUSIVE55,1733
int EV_MOD_NMOESI_EVICT_WRITEBACK_FINISH;EV_MOD_NMOESI_EVICT_WRITEBACK_FINISH56,1778
int EV_MOD_NMOESI_EVICT_PROCESS;EV_MOD_NMOESI_EVICT_PROCESS57,1820
int EV_MOD_NMOESI_EVICT_PROCESS_NONCOHERENT;EV_MOD_NMOESI_EVICT_PROCESS_NONCOHERENT58,1853
int EV_MOD_NMOESI_EVICT_WAIT_FOR_REQS;EV_MOD_NMOESI_EVICT_WAIT_FOR_REQS59,1898
int EV_MOD_NMOESI_EVICT_REPLY;EV_MOD_NMOESI_EVICT_REPLY60,1937
int EV_MOD_NMOESI_EVICT_REPLY_RECEIVE;EV_MOD_NMOESI_EVICT_REPLY_RECEIVE61,1968
int EV_MOD_NMOESI_EVICT_FINISH;EV_MOD_NMOESI_EVICT_FINISH62,2007
int EV_MOD_NMOESI_PREF_EVICT;EV_MOD_NMOESI_PREF_EVICT64,2040
int EV_MOD_NMOESI_PREF_EVICT_INVALID;EV_MOD_NMOESI_PREF_EVICT_INVALID65,2070
int EV_MOD_NMOESI_PREF_EVICT_ACTION;EV_MOD_NMOESI_PREF_EVICT_ACTION66,2108
int EV_MOD_NMOESI_PREF_EVICT_RECEIVE;EV_MOD_NMOESI_PREF_EVICT_RECEIVE67,2145
int EV_MOD_NMOESI_PREF_EVICT_PROCESS;EV_MOD_NMOESI_PREF_EVICT_PROCESS68,2183
int EV_MOD_NMOESI_PREF_EVICT_REPLY;EV_MOD_NMOESI_PREF_EVICT_REPLY69,2221
int EV_MOD_NMOESI_PREF_EVICT_REPLY_RECEIVE;EV_MOD_NMOESI_PREF_EVICT_REPLY_RECEIVE70,2257
int EV_MOD_NMOESI_PREF_EVICT_FINISH;EV_MOD_NMOESI_PREF_EVICT_FINISH71,2301
int EV_MOD_NMOESI_WRITE_REQUEST;EV_MOD_NMOESI_WRITE_REQUEST73,2339
int EV_MOD_NMOESI_WRITE_REQUEST_RECEIVE;EV_MOD_NMOESI_WRITE_REQUEST_RECEIVE74,2372
int EV_MOD_NMOESI_WRITE_REQUEST_ACTION;EV_MOD_NMOESI_WRITE_REQUEST_ACTION75,2413
int EV_MOD_NMOESI_WRITE_REQUEST_EXCLUSIVE;EV_MOD_NMOESI_WRITE_REQUEST_EXCLUSIVE76,2453
int EV_MOD_NMOESI_WRITE_REQUEST_UPDOWN;EV_MOD_NMOESI_WRITE_REQUEST_UPDOWN77,2496
int EV_MOD_NMOESI_WRITE_REQUEST_UPDOWN_FINISH;EV_MOD_NMOESI_WRITE_REQUEST_UPDOWN_FINISH78,2536
int EV_MOD_NMOESI_WRITE_REQUEST_DOWNUP;EV_MOD_NMOESI_WRITE_REQUEST_DOWNUP79,2583
int EV_MOD_NMOESI_WRITE_REQUEST_DOWNUP_FINISH;EV_MOD_NMOESI_WRITE_REQUEST_DOWNUP_FINISH80,2623
int EV_MOD_NMOESI_WRITE_REQUEST_REPLY;EV_MOD_NMOESI_WRITE_REQUEST_REPLY81,2670
int EV_MOD_NMOESI_WRITE_REQUEST_FINISH;EV_MOD_NMOESI_WRITE_REQUEST_FINISH82,2709
int EV_MOD_NMOESI_READ_REQUEST;EV_MOD_NMOESI_READ_REQUEST84,2750
int EV_MOD_NMOESI_READ_REQUEST_RECEIVE;EV_MOD_NMOESI_READ_REQUEST_RECEIVE85,2782
int EV_MOD_NMOESI_READ_REQUEST_LOCK;EV_MOD_NMOESI_READ_REQUEST_LOCK86,2822
int EV_MOD_NMOESI_READ_REQUEST_ACTION;EV_MOD_NMOESI_READ_REQUEST_ACTION87,2859
int EV_MOD_NMOESI_READ_REQUEST_UPDOWN;EV_MOD_NMOESI_READ_REQUEST_UPDOWN88,2898
int EV_MOD_NMOESI_READ_REQUEST_UPDOWN_MISS;EV_MOD_NMOESI_READ_REQUEST_UPDOWN_MISS89,2937
int EV_MOD_NMOESI_READ_REQUEST_UPDOWN_FINISH;EV_MOD_NMOESI_READ_REQUEST_UPDOWN_FINISH90,2981
int EV_MOD_NMOESI_READ_REQUEST_DOWNUP;EV_MOD_NMOESI_READ_REQUEST_DOWNUP91,3027
int EV_MOD_NMOESI_READ_REQUEST_DOWNUP_WAIT_FOR_REQS;EV_MOD_NMOESI_READ_REQUEST_DOWNUP_WAIT_FOR_REQS92,3066
int EV_MOD_NMOESI_READ_REQUEST_DOWNUP_FINISH;EV_MOD_NMOESI_READ_REQUEST_DOWNUP_FINISH93,3119
int EV_MOD_NMOESI_READ_REQUEST_REPLY;EV_MOD_NMOESI_READ_REQUEST_REPLY94,3165
int EV_MOD_NMOESI_READ_REQUEST_FINISH;EV_MOD_NMOESI_READ_REQUEST_FINISH95,3203
int EV_MOD_NMOESI_INVALIDATE;EV_MOD_NMOESI_INVALIDATE97,3243
int EV_MOD_NMOESI_INVALIDATE_FINISH;EV_MOD_NMOESI_INVALIDATE_FINISH98,3273
int EV_MOD_NMOESI_PEER_SEND;EV_MOD_NMOESI_PEER_SEND100,3311
int EV_MOD_NMOESI_PEER_RECEIVE;EV_MOD_NMOESI_PEER_RECEIVE101,3340
int EV_MOD_NMOESI_PEER_REPLY_ACK;EV_MOD_NMOESI_PEER_REPLY_ACK102,3372
int EV_MOD_NMOESI_PEER_FINISH;EV_MOD_NMOESI_PEER_FINISH103,3406
int EV_MOD_PREF;EV_MOD_PREF105,3438
int EV_MOD_PREF_LOCK;EV_MOD_PREF_LOCK106,3455
int EV_MOD_PREF_ACTION;EV_MOD_PREF_ACTION107,3477
int EV_MOD_PREF_MISS;EV_MOD_PREF_MISS108,3501
int EV_MOD_PREF_UNLOCK;EV_MOD_PREF_UNLOCK109,3523
int EV_MOD_PREF_FINISH;EV_MOD_PREF_FINISH110,3547
void mod_handler_pref(int event, void *data)mod_handler_pref114,3595
void mod_handler_nmoesi_load(int event, void *data)mod_handler_nmoesi_load315,9289
void mod_handler_nmoesi_store(int event, void *data)mod_handler_nmoesi_store553,16063
void mod_handler_nmoesi_nc_store(int event, void *data)mod_handler_nmoesi_nc_store740,21454
void mod_handler_nmoesi_find_and_lock(int event, void *data)mod_handler_nmoesi_find_and_lock975,28382
void mod_handler_nmoesi_evict(int event, void *data)mod_handler_nmoesi_evict1345,39633
void mod_handler_nmoesi_pref_evict(int event, void *data)mod_handler_nmoesi_pref_evict1716,50521
void mod_handler_nmoesi_read_request(int event, void *data)mod_handler_nmoesi_read_request1938,56902
void mod_handler_nmoesi_write_request(int event, void *data)mod_handler_nmoesi_write_request2674,80583
void mod_handler_nmoesi_peer(int event, void *data)mod_handler_nmoesi_peer3083,93930
void mod_handler_nmoesi_invalidate(int event, void *data)mod_handler_nmoesi_invalidate3150,95865

mem-system.c,474
int mem_debug_category;mem_debug_category29,899
int mem_trace_category;mem_trace_category30,923
struct mem_system_t *mem_system;mem_system32,948
void mem_system_init(void)mem_system_init41,1013
void mem_system_done(void)mem_system_done182,12556
void mem_system_dump_report()mem_system_dump_report207,13048
struct mod_t *mem_system_get_mod(char *mod_name)mem_system_get_mod322,18117
struct net_t *mem_system_get_net(char *net_name)mem_system_get_net341,18416

config.c,3176
char *mem_config_file_name = "";mem_config_file_name32,938
char *mem_report_file_name = "";mem_report_file_name33,971
char *mem_config_help =mem_config_help35,1005
#define MEM_SYSTEM_MAX_LEVELS MEM_SYSTEM_MAX_LEVELS207,10607
static char *err_mem_config_note =err_mem_config_note209,10642
static char *err_mem_config_net =err_mem_config_net213,10825
static char *err_mem_levels =err_mem_levels217,11017
static char *err_mem_block_size =err_mem_block_size223,11334
static char *err_mem_ignored_entry =err_mem_ignored_entry227,11519
static char *err_mem_connect =err_mem_connect231,11685
static void mem_config_cpu_default(struct config_t *config)mem_config_cpu_default237,11928
static void mem_config_gpu_default(struct config_t *config)mem_config_gpu_default318,15025
static void mem_config_read_general(struct config_t *config)mem_config_read_general411,18643
static void mem_config_read_networks(struct config_t *config)mem_config_read_networks426,19024
static void mem_config_insert_module_in_network(struct config_t *config,mem_config_insert_module_in_network474,20348
static struct mod_t *mem_config_read_cache(struct config_t *config, char *section)mem_config_read_cache579,23780
static struct mod_t *mem_config_read_main_memory(struct config_t *config, char *section)mem_config_read_main_memory687,27532
static void mem_config_read_module_address_range(struct config_t *config,mem_config_read_module_address_range760,30044
static void mem_config_read_modules(struct config_t *config)mem_config_read_modules875,33107
static void mem_config_check_route_to_main_memory(struct mod_t *mod, int block_size, int level)mem_config_check_route_to_main_memory931,34719
static void mem_config_read_low_modules(struct config_t *config)mem_config_read_low_modules970,35902
static void mem_config_read_cpu_entries(struct config_t *config)mem_config_read_cpu_entries1040,37863
static void mem_config_read_gpu_entries(struct config_t *config)mem_config_read_gpu_entries1179,42013
static void mem_config_create_switches(struct config_t *config)mem_config_create_switches1283,44887
static void mem_config_check_routes(void)mem_config_check_routes1351,46940
static void mem_config_set_mod_color(struct mod_t *mod, int color)mem_config_set_mod_color1427,49319
static int mem_config_check_mod_color(struct mod_t *mod, int color)mem_config_check_mod_color1447,49801
static void mem_config_check_disjoint(void)mem_config_check_disjoint1469,50273
static void mem_config_calculate_sub_block_sizes(void)mem_config_calculate_sub_block_sizes1496,50978
static void mem_config_set_mod_level(struct mod_t *mod, int level)mem_config_set_mod_level1540,52288
static void mem_config_calculate_mod_levels(void)mem_config_calculate_mod_levels1558,52675
#define MEM_SYSTEM_TRACE_VERSION_MAJOR	MEM_SYSTEM_TRACE_VERSION_MAJOR1602,53685
#define MEM_SYSTEM_TRACE_VERSION_MINOR	MEM_SYSTEM_TRACE_VERSION_MINOR1603,53727
static void mem_config_trace(void)mem_config_trace1606,53773
static void mem_config_read_commands(struct config_t *config)mem_config_read_commands1672,55515
void mem_system_config_read(void)mem_system_config_read1714,56380

cache.c,1563
struct string_map_t cache_policy_map =cache_policy_map26,844
struct string_map_t cache_block_state_map =cache_block_state_map35,998
enum cache_waylist_enumcache_waylist_enum54,1284
	cache_waylist_head,cache_waylist_head56,1310
	cache_waylist_tailcache_waylist_tail57,1331
static void cache_update_waylist(struct cache_set_t *set,cache_update_waylist60,1355
struct cache_t *cache_create(char *name, unsigned int num_sets, unsigned int block_size,cache_create119,2465
void cache_free(struct cache_t *cache)cache_free193,4699
void cache_decode_address(struct cache_t *cache, unsigned int addr, int *set_ptr, int *tag_ptr, cache_decode_address209,5088
int cache_find_block(struct cache_t *cache, unsigned int addr, int *set_ptr, int *way_ptr, cache_find_block221,5617
void cache_set_block(struct cache_t *cache, int set, int way, int tag, int state, unsigned int prefetched)cache_set_block249,6414
void cache_set_pref_block(struct cache_t *cache, int pref_stream, int tag, int state)cache_set_pref_block270,7147
void cache_get_block(struct cache_t *cache, int set, int way, int *tag_ptr, int *state_ptr)cache_get_block284,7613
void cache_get_pref_block(struct cache_t *cache, int pref_slot, int *tag_ptr, int *state_ptr)cache_get_pref_block292,7911
void cache_access_block(struct cache_t *cache, int set, int way)cache_access_block302,8316
int cache_replace_block(struct cache_t *cache, int set)cache_replace_block323,9075
void cache_set_transient_tag(struct cache_t *cache, int set, int way, int tag)cache_set_transient_tag354,9905

module.c,2730
struct string_map_t mod_access_kind_map =mod_access_kind_map23,849
struct mod_t *mod_create(char *name, enum mod_kind_t kind, int num_ports,mod_create40,1077
void mod_free(struct mod_t *mod)mod_free84,2061
void mod_dump(struct mod_t *mod, FILE *f)mod_dump110,2548
long long mod_access(struct mod_t *mod, enum mod_access_kind_t access_kind, mod_access119,2753
int mod_can_access(struct mod_t *mod, unsigned int addr)mod_can_access190,4343
void mod_get_tag_set(struct mod_t *mod, unsigned int addr, int *tag_ptr, int *set_ptr)mod_get_tag_set210,4910
int mod_find_block(struct mod_t *mod, unsigned int addr, int *set_ptr,mod_find_block236,5621
int mod_find_pref_block(struct mod_t *mod, unsigned int addr, int *pref_stream_ptr) mod_find_pref_block292,6947
void mod_lock_port(struct mod_t *mod, struct mod_stack_t *stack, int event)mod_lock_port334,7992
void mod_unlock_port(struct mod_t *mod, struct mod_port_t *port,mod_unlock_port370,8775
void mod_access_start(struct mod_t *mod, struct mod_stack_t *stack,mod_access_start403,9591
void mod_access_finish(struct mod_t *mod, struct mod_stack_t *stack)mod_access_finish424,10185
int mod_in_flight_access(struct mod_t *mod, long long id, unsigned int addr)mod_in_flight_access453,11075
struct mod_stack_t *mod_in_flight_address(struct mod_t *mod, unsigned int addr,mod_in_flight_address473,11739
struct mod_stack_t *mod_in_flight_write(struct mod_t *mod,mod_in_flight_write501,12574
int mod_serves_address(struct mod_t *mod, unsigned int addr)mod_serves_address521,13029
struct mod_t *mod_get_low_mod(struct mod_t *mod, unsigned int addr)mod_get_low_mod541,13552
int mod_get_retry_latency(struct mod_t *mod)mod_get_retry_latency582,14539
struct mod_stack_t *mod_can_coalesce(struct mod_t *mod,mod_can_coalesce593,14928
void mod_coalesce(struct mod_t *mod, struct mod_stack_t *master_stack,mod_coalesce697,17455
long long mod_stack_id;mod_stack_id728,18294
struct mod_stack_t *mod_stack_create(long long id, struct mod_t *mod,mod_stack_create730,18319
void mod_stack_return(struct mod_stack_t *stack)mod_stack_return765,19085
void mod_stack_wait_in_mod(struct mod_stack_t *stack,mod_stack_wait_in_mod780,19395
void mod_stack_wakeup_mod(struct mod_t *mod)mod_stack_wakeup_mod791,19714
void mod_stack_wait_in_port(struct mod_stack_t *stack,mod_stack_wait_in_port807,20045
void mod_stack_wakeup_port(struct mod_port_t *port)mod_stack_wakeup_port818,20375
void mod_stack_wait_in_stack(struct mod_stack_t *stack,mod_stack_wait_in_stack834,20717
void mod_stack_wakeup_stack(struct mod_stack_t *master_stack)mod_stack_wakeup_stack846,21077
void mod_stack_set_reply(struct mod_stack_t *stack, int reply)mod_stack_set_reply876,21920

local-mem-protocol.c,1020
int EV_MOD_LOCAL_MEM_LOAD;EV_MOD_LOCAL_MEM_LOAD24,834
int EV_MOD_LOCAL_MEM_LOAD_LOCK;EV_MOD_LOCAL_MEM_LOAD_LOCK25,861
int EV_MOD_LOCAL_MEM_LOAD_FINISH;EV_MOD_LOCAL_MEM_LOAD_FINISH26,893
int EV_MOD_LOCAL_MEM_STORE;EV_MOD_LOCAL_MEM_STORE28,928
int EV_MOD_LOCAL_MEM_STORE_LOCK;EV_MOD_LOCAL_MEM_STORE_LOCK29,956
int EV_MOD_LOCAL_MEM_STORE_FINISH;EV_MOD_LOCAL_MEM_STORE_FINISH30,989
int EV_MOD_LOCAL_MEM_FIND_AND_LOCK;EV_MOD_LOCAL_MEM_FIND_AND_LOCK32,1025
int EV_MOD_LOCAL_MEM_FIND_AND_LOCK_PORT;EV_MOD_LOCAL_MEM_FIND_AND_LOCK_PORT33,1061
int EV_MOD_LOCAL_MEM_FIND_AND_LOCK_ACTION;EV_MOD_LOCAL_MEM_FIND_AND_LOCK_ACTION34,1102
int EV_MOD_LOCAL_MEM_FIND_AND_LOCK_FINISH;EV_MOD_LOCAL_MEM_FIND_AND_LOCK_FINISH35,1145
void mod_handler_local_mem_load(int event, void *data)mod_handler_local_mem_load42,1238
void mod_handler_local_mem_store(int event, void *data)mod_handler_local_mem_store144,4103
void mod_handler_local_mem_find_and_lock(int event, void *data)mod_handler_local_mem_find_and_lock243,6752

mem-system.h,14316
#define MEM_SYSTEM_HMEM_SYSTEM_H20,811
#define PREF_BLOCKS PREF_BLOCKS32,1030
#define MEM_LOG_PAGE_SIZE MEM_LOG_PAGE_SIZE39,1100
#define MEM_PAGE_SHIFT MEM_PAGE_SHIFT40,1130
#define MEM_PAGE_SIZE MEM_PAGE_SIZE41,1172
#define MEM_PAGE_MASK MEM_PAGE_MASK42,1220
#define MEM_PAGE_COUNT MEM_PAGE_COUNT43,1266
enum mem_access_tmem_access_t45,1296
	mem_access_none   = 0x00,mem_access_none47,1316
	mem_access_read   = 0x01,mem_access_read48,1343
	mem_access_write  = 0x02,mem_access_write49,1370
	mem_access_exec   = 0x04,mem_access_exec50,1397
	mem_access_init   = 0x08,mem_access_init51,1424
	mem_access_modif  = 0x10mem_access_modif52,1451
struct mem_page_tmem_page_t59,1551
	unsigned int tag;tag61,1571
	enum mem_access_t perm;  /* Access permissions; combination of flags */perm62,1590
	struct mem_page_t *next;next63,1663
	unsigned char *data;data64,1689
struct mem_tmem_t67,1715
	int num_links;num_links70,1783
	struct mem_page_t *pages[MEM_PAGE_COUNT];pages73,1820
	int safe;safe76,1881
	unsigned int heap_break;heap_break79,1928
	unsigned int last_address;last_address82,1984
#define SPEC_MEM_PAGE_TABLE_SIZE SPEC_MEM_PAGE_TABLE_SIZE138,4171
#define SPEC_MEM_LOG_PAGE_SIZE SPEC_MEM_LOG_PAGE_SIZE142,4317
#define SPEC_MEM_PAGE_SIZE SPEC_MEM_PAGE_SIZE143,4351
#define SPEC_MEM_PAGE_MASK SPEC_MEM_PAGE_MASK144,4409
#define SPEC_MEM_MAX_PAGE_COUNT SPEC_MEM_MAX_PAGE_COUNT150,4726
struct spec_mem_page_tspec_mem_page_t152,4764
	unsigned int addr;addr154,4789
	unsigned char data[SPEC_MEM_PAGE_SIZE];data155,4809
	struct spec_mem_page_t *next;next156,4850
struct spec_mem_tspec_mem_t159,4885
	struct mem_t *mem;  /* Associated non-speculative memory */mem161,4905
	int page_count;  /* Number of words currently written */page_count163,4967
	struct spec_mem_page_t *pages[SPEC_MEM_PAGE_TABLE_SIZE];  /* Hash table */pages164,5025
enum cache_policy_tcache_policy_t185,5564
	cache_policy_invalid = 0,cache_policy_invalid187,5586
	cache_policy_lru,cache_policy_lru188,5613
	cache_policy_fifo,cache_policy_fifo189,5632
	cache_policy_randomcache_policy_random190,5652
enum cache_block_state_tcache_block_state_t193,5677
	cache_block_invalid = 0,cache_block_invalid195,5704
	cache_block_noncoherent,cache_block_noncoherent196,5730
	cache_block_modified,cache_block_modified197,5756
	cache_block_owned,cache_block_owned198,5779
	cache_block_exclusive,cache_block_exclusive199,5799
	cache_block_sharedcache_block_shared200,5823
struct cache_block_tcache_block_t203,5847
	struct cache_block_t *way_next;way_next205,5870
	struct cache_block_t *way_prev;way_prev206,5903
	int tag;tag208,5937
	int transient_tag;transient_tag209,5947
	int way;way210,5967
	enum cache_block_state_t state;state212,5978
	unsigned int prefetched;prefetched213,6011
struct cache_set_tcache_set_t216,6041
	struct cache_block_t *way_head;way_head218,6062
	struct cache_block_t *way_tail;way_tail219,6095
	struct cache_block_t *blocks;blocks220,6128
struct cache_tcache_t223,6163
	char *name;name225,6180
	unsigned int num_sets;num_sets227,6194
	unsigned int block_size;block_size228,6218
	unsigned int assoc;assoc229,6244
	enum cache_policy_t policy;policy230,6265
	unsigned int num_pref_streams; /* Number of streams for prefetch */num_pref_streams232,6296
	struct cache_block_t **prefetched_blocks;prefetched_blocks233,6365
	int fifo;fifo234,6408
	struct cache_set_t *sets;sets236,6420
	unsigned int block_mask;block_mask237,6447
	int log_block_size;log_block_size238,6473
struct dir_lock_tdir_lock_t269,7562
	int lock;lock271,7582
	long long stack_id;stack_id272,7593
	struct mod_stack_t *lock_queue;lock_queue273,7614
#define DIR_ENTRY_OWNER_NONE DIR_ENTRY_OWNER_NONE276,7651
#define DIR_ENTRY_VALID_OWNER(DIR_ENTRY_VALID_OWNER277,7686
struct dir_entry_tdir_entry_t279,7755
	int owner;  /* Node owning the block (-1 = No owner)*/owner281,7776
	int num_sharers;  /* Number of 1s in next field */num_sharers282,7832
	unsigned char sharer[0];  /* Bitmap of sharers (must be last field) */sharer283,7884
struct dir_tdir_t286,7960
	char *name;name288,7975
	int num_nodes;num_nodes292,8096
	int xsize, ysize, zsize, psize;xsize299,8395
	int xsize, ysize, zsize, psize;ysize299,8395
	int xsize, ysize, zsize, psize;zsize299,8395
	int xsize, ysize, zsize, psize;psize299,8395
	struct dir_lock_t *dir_lock;dir_lock303,8542
	struct dir_lock_t *pref_dir_lock; //VVVpref_dir_lock307,8679
	unsigned char data[0];data311,8847
enum mmu_access_tmmu_access_t343,10161
	mmu_access_invalid = 0,mmu_access_invalid345,10181
	mmu_access_read,mmu_access_read346,10206
	mmu_access_write,mmu_access_write347,10224
	mmu_access_executemmu_access_execute348,10243
struct mod_port_tmod_port_t375,10752
	int locked;locked378,10796
	long long lock_when;  /* Cycle when it was locked */lock_when379,10809
	struct mod_stack_t *stack;  /* Access locking port */stack380,10863
	struct mod_stack_t *waiting_list_head;waiting_list_head383,10939
	struct mod_stack_t *waiting_list_tail;waiting_list_tail384,10979
	int waiting_list_count;waiting_list_count385,11019
	int waiting_list_max;waiting_list_max386,11044
enum mod_access_kind_tmod_access_kind_t393,11171
	mod_access_invalid = 0,mod_access_invalid395,11196
	mod_access_load,mod_access_load396,11221
	mod_access_store,mod_access_store397,11239
	mod_access_nc_store,mod_access_nc_store398,11258
	mod_access_prefetchmod_access_prefetch399,11280
enum mod_kind_tmod_kind_t403,11324
	mod_kind_invalid = 0,mod_kind_invalid405,11342
	mod_kind_cache,mod_kind_cache406,11365
	mod_kind_main_memory,mod_kind_main_memory407,11382
	mod_kind_local_memorymod_kind_local_memory408,11405
enum mod_range_kind_tmod_range_kind_t412,11460
	mod_range_invalid = 0,mod_range_invalid414,11484
	mod_range_bounds,mod_range_bounds415,11508
	mod_range_interleavedmod_range_interleaved416,11527
#define MOD_ACCESS_HASH_TABLE_SIZE MOD_ACCESS_HASH_TABLE_SIZE419,11554
struct mod_tmod_t422,11614
	enum mod_kind_t kind;kind425,11647
	char *name;name426,11670
	int block_size;block_size427,11683
	int log_block_size;log_block_size428,11700
	int latency;latency429,11721
	int mshr_size;mshr_size430,11735
	int prefetch_enabled;prefetch_enabled431,11751
	int level;level434,11823
	enum mod_range_kind_t range_kind;range_kind437,11874
			unsigned int low;low443,11974
			unsigned int high;high444,11995
		} bounds;bounds445,12017
			unsigned int mod;mod450,12090
			unsigned int div;div451,12111
			unsigned int eq;eq452,12132
		} interleaved;interleaved453,12152
	} range;range454,12169
	struct linked_list_t *pq;pq457,12213
	struct mod_port_t *ports;ports460,12254
	int num_ports;num_ports461,12281
	int num_locked_ports;num_locked_ports462,12297
	struct mod_stack_t *port_waiting_list_head;port_waiting_list_head465,12359
	struct mod_stack_t *port_waiting_list_tail;port_waiting_list_tail466,12404
	int port_waiting_list_count;port_waiting_list_count467,12449
	int port_waiting_list_max;port_waiting_list_max468,12479
	struct dir_t *dir;dir471,12525
	int dir_size;dir_size472,12545
	int dir_assoc;dir_assoc473,12560
	int dir_num_sets;dir_num_sets474,12576
	struct mod_stack_t *waiting_list_head;waiting_list_head477,12626
	struct mod_stack_t *waiting_list_tail;waiting_list_tail478,12666
	int waiting_list_count;waiting_list_count479,12706
	int waiting_list_max;waiting_list_max480,12731
	struct cache_t *cache;cache483,12778
	struct linked_list_t *high_mod_list;high_mod_list486,12838
	struct linked_list_t *low_mod_list;low_mod_list487,12876
	int sub_block_size;sub_block_size491,13035
	int num_sub_blocks;  /* block_size / sub_block_size */num_sub_blocks492,13056
	struct net_t *high_net;high_net495,13134
	struct net_t *low_net;low_net496,13159
	struct net_node_t *high_net_node;high_net_node497,13183
	struct net_node_t *low_net_node;low_net_node498,13218
	struct mod_stack_t *access_list_head;access_list_head501,13272
	struct mod_stack_t *access_list_tail;access_list_tail502,13311
	int access_list_count;access_list_count503,13350
	int access_list_max;access_list_max504,13374
	struct mod_stack_t *write_access_list_head;write_access_list_head507,13422
	struct mod_stack_t *write_access_list_tail;write_access_list_tail508,13467
	int write_access_list_count;write_access_list_count509,13512
	int write_access_list_max;write_access_list_max510,13542
	int access_list_coalesced_count;access_list_coalesced_count514,13687
		struct mod_stack_t *bucket_list_head;bucket_list_head519,13763
		struct mod_stack_t *bucket_list_tail;bucket_list_tail520,13803
		int bucket_list_count;bucket_list_count521,13843
		int bucket_list_max;bucket_list_max522,13868
	} access_hash_table[MOD_ACCESS_HASH_TABLE_SIZE];access_hash_table523,13891
	int color;color527,14060
	long long accesses;accesses530,14091
	long long hits;hits531,14112
	long long reads;reads533,14130
	long long effective_reads;effective_reads534,14148
	long long effective_read_hits;effective_read_hits535,14176
	long long writes;writes536,14208
	long long effective_writes;effective_writes537,14227
	long long effective_write_hits;effective_write_hits538,14256
	long long evictions;evictions539,14289
	long long blocking_reads;blocking_reads541,14312
	long long non_blocking_reads;non_blocking_reads542,14339
	long long read_hits;read_hits543,14370
	long long blocking_writes;blocking_writes544,14392
	long long non_blocking_writes;non_blocking_writes545,14420
	long long write_hits;write_hits546,14452
	long long read_retries;read_retries548,14476
	long long write_retries;write_retries549,14501
	long long no_retry_accesses;no_retry_accesses551,14528
	long long no_retry_hits;no_retry_hits552,14558
	long long no_retry_reads;no_retry_reads553,14584
	long long no_retry_read_hits;no_retry_read_hits554,14611
	long long no_retry_writes;no_retry_writes555,14642
	long long no_retry_write_hits;no_retry_write_hits556,14670
	long long completed_prefetches;completed_prefetches558,14704
	long long programmed_prefetches;programmed_prefetches559,14737
	long long useful_prefetches;useful_prefetches560,14771
	long long delayed_hits;delayed_hits561,14801
	double prefetch_precision;prefetch_precision562,14826
	double prefetch_coverage;prefetch_coverage563,14854
enum mod_request_dir_tmod_request_dir_t723,20592
	mod_request_invalid = 0,mod_request_invalid725,20617
	mod_request_up_down,mod_request_up_down726,20643
	mod_request_down_upmod_request_down_up727,20665
enum ack_typesack_types731,20706
	reply_NO_REPLY = 0,reply_NO_REPLY733,20723
	reply_ACK,reply_ACK734,20744
	reply_ACK_DATA,reply_ACK_DATA735,20756
	reply_ACK_DATA_SENT_TO_PEER,reply_ACK_DATA_SENT_TO_PEER736,20773
	reply_ACK_ERRORreply_ACK_ERROR737,20803
struct mod_stack_tmod_stack_t741,20836
	long long id;id743,20857
	enum mod_access_kind_t access_kind;access_kind744,20872
	int *witness_ptr;witness_ptr745,20909
	struct linked_list_t *event_queue;event_queue747,20929
	void *event_queue_item;event_queue_item748,20965
	struct mod_t *mod;mod750,20991
	struct mod_t *target_mod;target_mod751,21011
	struct mod_t *except_mod;except_mod752,21038
	struct mod_t *peer;peer753,21065
	struct mod_port_t *port;port755,21087
	unsigned int addr;addr757,21114
	int tag;tag758,21134
	int set;set759,21144
	int way;way760,21154
	int state;state761,21164
	int core;core762,21176
	int thread;thread763,21187
	int src_set;src_set765,21201
	int src_way;src_way766,21215
	int src_tag;src_tag767,21229
	int src_pref_stream;src_pref_stream768,21243
	enum mod_request_dir_t request_dir;request_dir770,21266
	int reply_size;reply_size771,21303
	int reply;reply772,21320
	int retain_owner;retain_owner773,21332
	int pending;pending774,21351
	struct mod_stack_t *access_list_prev;access_list_prev777,21406
	struct mod_stack_t *access_list_next;access_list_next778,21445
	struct mod_stack_t *write_access_list_prev;write_access_list_prev781,21531
	struct mod_stack_t *write_access_list_next;write_access_list_next782,21576
	struct mod_stack_t *bucket_list_prev;bucket_list_prev785,21676
	struct mod_stack_t *bucket_list_next;bucket_list_next786,21715
	int hit : 1;hit789,21768
	int err : 1;err790,21782
	int shared : 1;shared791,21796
	int read : 1;read792,21813
	int nc_store : 1;nc_store793,21828
	int blocking : 1;blocking794,21847
	int writeback : 1;writeback795,21866
	int eviction : 1;eviction796,21886
	int pref_eviction : 1; //VVVpref_eviction797,21905
	int retry : 1;retry798,21935
	int coalesced : 1;coalesced799,21951
	int port_locked : 1;port_locked800,21971
	int prefetch; //VVVprefetch801,21993
	int prefetch_hit : 1;prefetch_hit802,22014
	int pref_stream; //VVVpref_stream803,22037
	struct net_msg_t *msg;msg806,22103
	int waiting_list_event;  /* Event to schedule when stack is waken up */waiting_list_event809,22166
	struct mod_stack_t *waiting_list_prev;waiting_list_prev810,22239
	struct mod_stack_t *waiting_list_next;waiting_list_next811,22279
	int port_waiting_list_event;port_waiting_list_event814,22360
	struct mod_stack_t *port_waiting_list_prev;port_waiting_list_prev815,22390
	struct mod_stack_t *port_waiting_list_next;port_waiting_list_next816,22435
	struct mod_stack_t *waiting_list_head;waiting_list_head821,22658
	struct mod_stack_t *waiting_list_tail;waiting_list_tail822,22698
	int waiting_list_count;waiting_list_count823,22738
	int waiting_list_max;waiting_list_max824,22763
	struct mod_stack_t *master_stack;master_stack828,22928
	int dir_lock_event;dir_lock_event831,23004
	struct mod_stack_t *dir_lock_next;dir_lock_next832,23025
	struct mod_stack_t *ret_stack;ret_stack835,23082
	int ret_event;ret_event836,23114
#define mem_debugging(mem_debugging902,25151
#define mem_debug(mem_debug903,25208
#define mem_tracing(mem_tracing906,25302
#define mem_trace(mem_trace907,25357
#define mem_trace_header(mem_trace_header908,25419
struct mem_system_tmem_system_t911,25527
	struct list_t *mod_list;mod_list914,25585
	struct list_t *net_list;net_list915,25611

mmu.c,1707
char *mmu_report_file_name = "";mmu_report_file_name28,859
unsigned int mmu_page_size = 1 << 12;  /* 4KB default page size */mmu_page_size30,893
unsigned int mmu_log_page_size;mmu_log_page_size31,960
unsigned int mmu_page_mask;mmu_page_mask32,992
#define MMU_PAGE_HASH_SIZE MMU_PAGE_HASH_SIZE42,1075
#define MMU_PAGE_LIST_SIZE MMU_PAGE_LIST_SIZE43,1113
struct mmu_page_tmmu_page_t46,1179
	struct mmu_page_t *next;next48,1199
	int address_space_index;  /* Memory map ID */address_space_index50,1226
	unsigned int vtl_addr;  /* Virtual address of page */vtl_addr51,1273
	unsigned int phy_addr;  /* Physical address */phy_addr52,1328
	long long num_read_accesses;num_read_accesses55,1395
	long long num_write_accesses;num_write_accesses56,1425
	long long num_execute_accesses;num_execute_accesses57,1456
struct mmu_tmmu_t61,1522
	struct list_t *page_list;page_list64,1558
	struct mmu_page_t *page_hash_table[MMU_PAGE_HASH_SIZE];page_hash_table67,1613
	FILE *report_file;report_file70,1690
static struct mmu_t *mmu;mmu73,1714
static struct mmu_page_t *mmu_get_page(int address_space_index, unsigned int vtladdr)mmu_get_page82,1773
static int mmu_page_compare(const void *ptr1, const void *ptr2)mmu_page_compare137,3055
void mmu_init()mmu_init164,3648
void mmu_done()mmu_done188,4222
void mmu_dump_report(void)mmu_dump_report205,4455
int mmu_address_space_new(void)mmu_address_space_new245,5437
unsigned int mmu_translate(int address_space_index, unsigned int vtl_addr)mmu_translate253,5548
int mmu_valid_phy_addr(unsigned int phy_addr)mmu_valid_phy_addr268,5862
void mmu_access_page(unsigned int phy_addr, enum mmu_access_t access)mmu_access_page277,6006

command.c,1595
int EV_MEM_SYSTEM_COMMAND;EV_MEM_SYSTEM_COMMAND23,817
int EV_MEM_SYSTEM_END_COMMAND;EV_MEM_SYSTEM_END_COMMAND24,844
static void mem_system_command_expect(struct list_t *token_list, char *command_line)mem_system_command_expect33,908
static void mem_system_command_end(struct list_t *token_list, char *command_line)mem_system_command_end41,1108
static unsigned int mem_system_command_get_hex(struct list_t *token_list,mem_system_command_get_hex49,1340
static void mem_system_command_get_string(struct list_t *token_list,mem_system_command_get_string67,1782
int mem_system_command_get_high_low(struct list_t *token_list, char *command_line)mem_system_command_get_high_low75,2049
int mem_system_command_get_in_out(struct list_t *token_list, char *command_line)mem_system_command_get_in_out104,2615
static struct mod_t *mem_system_command_get_mod(struct list_t *token_list,mem_system_command_get_mod133,3177
static void mem_system_command_get_set_way(struct list_t *token_list, char *command_line, mem_system_command_get_set_way161,3735
static int mem_system_command_get_sub_block(struct list_t *token_list,mem_system_command_get_sub_block196,4641
static int mem_system_command_get_state(struct list_t *token_list,mem_system_command_get_state221,5314
static enum mod_access_kind_t mem_system_command_get_mod_access(struct list_t *token_list,mem_system_command_get_mod_access239,5777
void mem_system_command_handler(int event, void *data)mem_system_command_handler271,6576
void mem_system_end_command_handler(int event, void *data)mem_system_end_command_handler432,11290

memory.c,2451
unsigned long mem_mapped_space = 0;mem_mapped_space26,898
unsigned long mem_max_mapped_space = 0;mem_max_mapped_space27,934
int mem_safe_mode = 1;mem_safe_mode30,991
struct mem_page_t *mem_page_get(struct mem_t *mem, unsigned int addr)mem_page_get34,1067
struct mem_page_t *mem_page_get_next(struct mem_t *mem, unsigned int addr)mem_page_get_next66,1773
static struct mem_page_t *mem_page_create(struct mem_t *mem, unsigned int addr, int perm)mem_page_create106,2758
static void mem_page_free(struct mem_t *mem, unsigned int addr)mem_page_free134,3431
void mem_copy(struct mem_t *mem, unsigned int dest, unsigned int src, int size)mem_copy167,4132
void *mem_get_buffer(struct mem_t *mem, unsigned int addr, int size,mem_get_buffer216,5425
static void mem_access_page_boundary(struct mem_t *mem, unsigned int addr,mem_access_page_boundary250,6255
void mem_access(struct mem_t *mem, unsigned int addr, int size, void *buf,mem_access320,8079
void mem_read(struct mem_t *mem, unsigned int addr, int size, void *buf)mem_read340,8487
void mem_write(struct mem_t *mem, unsigned int addr, int size, void *buf)mem_write346,8618
struct mem_t *mem_create()mem_create353,8782
void mem_free(struct mem_t *mem)mem_free370,9020
struct mem_t *mem_link(struct mem_t *mem)mem_link378,9114
void mem_unlink(struct mem_t *mem)mem_unlink385,9194
void mem_clear(struct mem_t *mem)mem_clear396,9348
unsigned int mem_map_space(struct mem_t *mem, unsigned int addr, int size)mem_map_space409,9607
unsigned int mem_map_space_down(struct mem_t *mem, unsigned int addr, int size)mem_map_space_down449,10376
void mem_map(struct mem_t *mem, unsigned int addr, int size,mem_map491,11377
void mem_unmap(struct mem_t *mem, unsigned int addr, int size)mem_unmap517,12117
void mem_protect(struct mem_t *mem, unsigned int addr, int size, enum mem_access_t perm)mem_protect534,12563
void mem_write_string(struct mem_t *mem, unsigned int addr, char *str)mem_write_string558,13113
int mem_read_string(struct mem_t *mem, unsigned int addr, int size, char *str)mem_read_string567,13441
void mem_zero(struct mem_t *mem, unsigned int addr, int size)mem_zero580,13662
void mem_dump(struct mem_t *mem, char *filename, unsigned int start, unsigned int end)mem_dump588,13826
void mem_load(struct mem_t *mem, char *file_name, unsigned int start)mem_load614,14359
void mem_clone(struct mem_t *dst_mem, struct mem_t *src_mem)mem_clone643,15005

directory.c,1822
#define DIR_ENTRY_SHARERS_SIZE DIR_ENTRY_SHARERS_SIZE24,831
#define DIR_ENTRY_SIZE DIR_ENTRY_SIZE25,889
#define DIR_ENTRY(DIR_ENTRY26,966
struct dir_t *dir_create(char *name, int xsize, int ysize, int zsize, int psize, int num_nodes)dir_create30,1123
void dir_free(struct dir_t *dir)dir_free101,2661
struct dir_entry_t *dir_entry_get(struct dir_t *dir, int x, int y, int z)dir_entry_get110,2779
struct dir_entry_t *dir_pref_entry_get(struct dir_t *dir, int pref_slot)dir_pref_entry_get118,3009
void dir_entry_dump_sharers(struct dir_t *dir, int x, int y, int z)dir_entry_dump_sharers125,3284
void dir_entry_set_owner(struct dir_t *dir, int x, int y, int z, int node)dir_entry_set_owner139,3622
void dir_entry_set_sharer(struct dir_t *dir, int x, int y, int z, int node)dir_entry_set_sharer154,4009
void dir_entry_clear_sharer(struct dir_t *dir, int x, int y, int z, int node)dir_entry_clear_sharer175,4575
void dir_entry_clear_all_sharers(struct dir_t *dir, int x, int y, int z)dir_entry_clear_all_sharers196,5134
int dir_entry_is_sharer(struct dir_t *dir, int x, int y, int z, int node)dir_entry_is_sharer213,5521
int dir_entry_group_shared_or_owned(struct dir_t *dir, int x, int y)dir_entry_group_shared_or_owned223,5787
struct dir_lock_t *dir_pref_lock_get(struct dir_t *dir, int pref_slot)dir_pref_lock_get236,6065
struct dir_lock_t *dir_lock_get(struct dir_t *dir, int x, int y)dir_lock_get244,6282
int dir_pref_entry_lock(struct dir_t *dir, int pref_slot, int event,dir_pref_entry_lock253,6545
int dir_entry_lock(struct dir_t *dir, int x, int y, int event, struct mod_stack_t *stack)dir_entry_lock314,8004
void dir_entry_unlock(struct dir_t *dir, int x, int y)dir_entry_unlock376,9467
void dir_pref_entry_unlock(struct dir_t *dir, int pref_slot)dir_pref_entry_unlock400,10123
